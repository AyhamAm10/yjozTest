import React from "react";

interface CustomFileUploaderProps {
  onFilesSelect: (files: File[]) => void; 
  multi: boolean; 
}

const CustomFileUploader: React.FC<CustomFileUploaderProps> = ({
  onFilesSelect,
  multi,
}) => {
  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {
    const selectedFiles = event.target.files;
    if (selectedFiles) {
      const fileArray = Array.from(selectedFiles);
      onFilesSelect(multi ? fileArray : [fileArray[0]]); 
    }
  };

  return (
    <div className="flex flex-col items-center w-fit">
      <label htmlFor="file-input" className="cursor-pointer">
        <div className="w-[9.75rem] sm:w-[6rem] md:w-[8rem] xl:w-[9.75rem] h-[9.75rem] sm:h-[6rem] md:h-[8rem] xl:h-[9.75rem] bg-white rounded-md border-2 border-dashed border-gray-300 flex justify-center items-center bg-gray-100 hover:border-gray-500">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="55"
            height="55"
            viewBox="0 0 55 55"
            fill="none"
          >
            <path
              d="M44.4746 11.5689H39.0788L36.459 7.63276C36.2274 7.28571 35.9137 7.00128 35.5457 6.80476C35.1777 6.60824 34.7668 6.50573 34.3496 6.50635H20.8496C20.4324 6.50573 20.0215 6.60824 19.6535 6.80476C19.2855 7.00128 18.9718 7.28571 18.7402 7.63276L16.1183 11.5689H10.7246C9.15817 11.5689 7.6559 12.1911 6.54826 13.2988C5.44062 14.4064 4.81836 15.9087 4.81836 17.4751V41.1001C4.81836 42.6665 5.44062 44.1688 6.54826 45.2765C7.6559 46.3841 9.15817 47.0064 10.7246 47.0064H44.4746C45.2502 47.0064 46.0183 46.8536 46.7348 46.5568C47.4514 46.2599 48.1025 45.8249 48.651 45.2765C49.1994 44.728 49.6345 44.0769 49.9313 43.3603C50.2281 42.6437 50.3809 41.8757 50.3809 41.1001V17.4751C50.3809 16.6995 50.2281 15.9315 49.9313 15.2149C49.6345 14.4983 49.1994 13.8472 48.651 13.2988C48.1025 12.7503 47.4514 12.3153 46.7348 12.0184C46.0183 11.7216 45.2502 11.5689 44.4746 11.5689ZM45.3184 41.1001C45.3184 41.3239 45.2295 41.5385 45.0712 41.6967C44.913 41.855 44.6984 41.9439 44.4746 41.9439H10.7246C10.5008 41.9439 10.2862 41.855 10.128 41.6967C9.96975 41.5385 9.88086 41.3239 9.88086 41.1001V17.4751C9.88086 17.2513 9.96975 17.0367 10.128 16.8785C10.2862 16.7202 10.5008 16.6314 10.7246 16.6314H17.4746C17.8918 16.632 18.3027 16.5295 18.6707 16.3329C19.0387 16.1364 19.3524 15.852 19.584 15.5049L22.2038 11.5689H32.9933L35.6152 15.5049C35.8468 15.852 36.1605 16.1364 36.5285 16.3329C36.8965 16.5295 37.3074 16.632 37.7246 16.6314H44.4746C44.6984 16.6314 44.913 16.7202 45.0712 16.8785C45.2295 17.0367 45.3184 17.2513 45.3184 17.4751V41.1001ZM27.5996 18.3189C25.5971 18.3189 23.6395 18.9127 21.9745 20.0252C20.3094 21.1378 19.0117 22.7191 18.2453 24.5692C17.479 26.4193 17.2785 28.4551 17.6692 30.4191C18.0598 32.3832 19.0241 34.1873 20.4402 35.6033C21.8562 37.0193 23.6603 37.9836 25.6243 38.3743C27.5884 38.765 29.6242 38.5645 31.4743 37.7981C33.3244 37.0318 34.9057 35.734 36.0182 34.069C37.1308 32.404 37.7246 30.4464 37.7246 28.4439C37.7218 25.7594 36.6542 23.1857 34.756 21.2875C32.8578 19.3893 30.2841 18.3216 27.5996 18.3189ZM27.5996 33.5064C26.5983 33.5064 25.6196 33.2094 24.787 32.6532C23.9545 32.0969 23.3056 31.3062 22.9225 30.3812C22.5393 29.4561 22.439 28.4382 22.6344 27.4562C22.8297 26.4742 23.3119 25.5721 24.0199 24.8641C24.7279 24.1561 25.6299 23.674 26.612 23.4786C27.594 23.2833 28.6119 23.3835 29.5369 23.7667C30.462 24.1499 31.2527 24.7988 31.8089 25.6313C32.3652 26.4638 32.6621 27.4426 32.6621 28.4439C32.6621 29.7865 32.1287 31.0742 31.1826 32.0203C30.2365 32.9664 28.9488 33.4998 27.5996 33.4998V33.5064Z"
              fill="#C7C7CC"
            />
          </svg>
        </div>
      </label>
      <input
        id="file-input"
        type="file"
        className="hidden"
        onChange={handleFileChange}
        multiple={multi} // إذا كانت multi true، يجب أن يتمكن المستخدم من تحميل ملفات متعددة
      />
    </div>
  );
};

export default CustomFileUploader;
